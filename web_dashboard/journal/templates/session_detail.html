{% extends 'base.html' %}
{% block content %}
<div class="mb-3">
    <a href="/" class="btn btn-outline-secondary">‚Üê Back</a>
</div>

<h2>Report: {{ session.agent_name }} on {{ session.symbol }}</h2>
<div class="card mb-4 p-2">
    {{ chart|safe }}
</div>

<h3>Trade List</h3>
<table class="table table-sm table-dark text-center">
    <thead>
        <tr>
            <th>Type</th>
            <th>Entry Time</th>
            <th>Entry Price</th>
            <th>Exit Price</th>
            <th>Profit</th>
            <th>Reason</th>
        </tr>
    </thead>
    <tbody>
        {% for t in trades %}
        <tr>
            <td>
                <span class="badge {% if t.direction == 'BUY' %}bg-success{% else %}bg-danger{% endif %}">
                    {{ t.direction }}
                </span>
            </td>
            <td>{{ t.entry_time|date:"m-d H:i" }}</td>
            <td>{{ t.entry_price }}</td>
            <td>{{ t.exit_price }}</td>
            <td class="{% if t.profit > 0 %}text-green{% else %}text-red{% endif %}">
                {{ t.profit|floatformat:2 }}
            </td>
            <td>{{ t.reason }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}